<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Portfolio de Manu Laguna, iOS Developer con 6+ años de experiencia en Swift, UIKit y SwiftUI. Especializado en desarrollo de apps móviles nativas.">
    <meta name="keywords" content="iOS Developer, Swift, UIKit, SwiftUI, Mobile Apps, Manu Laguna">
    <title>Emelagudev - Home</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <main role="main">
        <section id="hero">
            <h1>Welcome!</h1>
            <p>I'm Manu Laguna, a seasoned iOS developer with over 6 years of experience specializing in Swift, UIKit, and SwiftUI. I create innovative, user-centric applications that prioritize performance, accessibility, and scalability. Explore my portfolio to discover projects that showcase my expertise in mobile development, API integration, and cross-platform solutions.</p>
            <p>With a passion for clean code and efficient problem-solving, I deliver high-quality software that meets business needs and enhances user experiences.</p>
            <a href="pages/contact.html" class="btn">Get In Touch</a>
        </section>

        <section id="featured-projects">
            <h1>Featured Projects</h1>
            <!-- Cards will be rendered here by JavaScript -->
        </section>

        <section id="skills">
            <h2>Tech Stack</h2>
            <div class="card">
                <h3>Languages & Frameworks</h3>
                <p>Swift, Objective-C, SwiftUI, UIKit, Combine, RxSwift, Swift Concurrency, AVFoundation, Core Data, Swift Data, Firebase, Swift Vapor</p>
                <h3>Architecture & Patterns</h3>
                <p>MVVM, VIPER, Redux, TCA, Adapter, Observer, Factory, Strategy, Dependency Injection</p>
                <h3>Testing</h3>
                <p>XCTest, Quick/Nimble, Swift Testing</p>
                <h3>Networking & Tools</h3>
                <p>Moya, Alamofire, CocoaPods, SPM, GitHub, CloudKit</p>
                <h3>Maps & Services</h3>
                <p>Google Maps, Google Places, MapKit, Mapbox, ArcGIS, WebSockets</p>
            </div>
        </section>
    </main>
    <footer role="contentinfo">
        <p>&copy; 2025 Manu Laguna. All rights reserved.</p>
    </footer>
    <script src="js/script.js"></script>
    <script>
        // Fetch projects.json and render featured projects
        fetch('projects.json')
            .then(response => response.json())
            .then(data => {
                const isInPages = window.location.pathname.includes('/pages/');
                const featuredProjects = data.filter(project => project.isFeatured);
                const container = document.getElementById('featured-projects');
                featuredProjects.forEach(project => {
                    let carouselHTML = '';
                    if (project.showcase) {
                        carouselHTML = `
                            <video 
                                src="${project.showcase}" 
                                class="showcase-video" 
                                autoplay 
                                loop 
                                muted 
                                playsinline 
                                controls>
                                Your browser does not support the video tag.
                            </video>`;
                    } else {
                        const images = project.images ? project.images.slice(0, 3) : [];
                        if (images.length <= 3) {
                            carouselHTML = `<div class="carousel-flex">${images.map((img, index) => `<img src="${img}" alt="Screenshot ${index + 1} of ${project.name}" class="carousel-image">`).join('')}</div>`;
                        } else {
                            carouselHTML = `
                                <div class="carousel">
                                    <div class="carousel-images">
                                        ${images.map((img, index) => `<img src="${img}" alt="Screenshot ${index + 1} of ${project.name}" class="carousel-image">`).join('')}
                                    </div>
                                    <button class="carousel-prev">‹</button>
                                    <button class="carousel-next">›</button>
                                </div>
                            `;
                        }
                    }
                    const cardHTML = `
                        <div class="card project">
                            <h2>${project.name}</h2>
                            <p>${project.description}</p>
                            ${carouselHTML}
                            ${!isInPages ? '<p><a href="pages/projects.html" class="btn">more</a></p>' : ''}
                            <p><a href="${project.link.url}" target="_blank" class="btn">${project.link.label}</a></p>
                        </div>
                    `;
                    container.innerHTML += cardHTML;
                });

                // Initialize carousels
                function initCarousel(carousel) {
                    const images = carousel.querySelectorAll('.carousel-image');
                    let currentIndex = 0;
                    const prevBtn = carousel.querySelector('.carousel-prev');
                    const nextBtn = carousel.querySelector('.carousel-next');

                    function showImage(index) {
                        images.forEach((img, i) => {
                            img.style.display = i === index ? 'block' : 'none';
                        });
                    }

                    // Initialize first image
                    showImage(0);

                    prevBtn.addEventListener('click', () => {
                        currentIndex = (currentIndex - 1 + images.length) % images.length;
                        showImage(currentIndex);
                    });

                    nextBtn.addEventListener('click', () => {
                        currentIndex = (currentIndex + 1) % images.length;
                        showImage(currentIndex);
                    });
                }

                document.querySelectorAll('.carousel').forEach(initCarousel);
            })
            .catch(error => console.error('Error loading projects:', error));
    </script>
</body>
</html>